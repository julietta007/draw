var draw=function(){var t=document.querySelector("main").offsetWidth,e=document.querySelector("main").offsetHeight,n=document.createElement("canvas"),d=n.getContext("2d"),r=n.getBoundingClientRect(),o=0,a=0,l=0,c=0,s=0,i=0,u=0,f=0,g="",h=!1,w="",m="";return{randColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},setStrokeColor:function(t){w=t},setFillColor:function(t){m=t},getStrokeColor:function(){return 6<w.length?w:this.randColor()},getFillColor:function(){return 6<m.length?m:this.randColor()},setXY:function(t){u=o,f=a,o=t.clientX-r.left-n.offsetLeft,a=t.clientY-r.top-n.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="X: "+o,document.getElementById("trackY").innerHTML="Y: "+a},setIsDrawing:function(t){h=t},getIsDrawing:function(){return h},setShape:function(t){g=t},setStart:function(){l=o,c=a},setEnd:function(){s=o,i=a},getCanvas:function(){return n},getShape:function(){return g},draw:function(){d.restore(),"rectangle"===g?this.drawRect():"line"===g?this.drawLine():"circle"===g?this.drawCircle():"path"===g?this.drawPath():alert("Please choose a shape"),d.save()},drawLine:function(){d.strokeStyle=this.getStrokeColor(),d.beginPath(),d.moveTo(l,c),d.lineTo(s,i),d.stroke()},drawRect:function(t,e,n,r){d.fillStyle=this.getFillColor(),d.strokeStyle=this.getStrokeColor(),d.fillRect(l,c,s-l,i-c),d.strokeRect(l,c,s-l,i-c)},drawCircle:function(t,e,n,r,o){d.fillStyle=this.getFillColor(),d.strokeStyle=this.getStrokeColor(),d.beginPath();var a=l-s,i=l-s;radius=Math.sqrt(a*a+i*i),d.arc(l,c,radius,0,2*Math.PI),d.stroke(),d.fill()},drawPath:function(){d.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),d.beginPath(),d.moveTo(u,f),d.lineTo(o,a),d.stroke()},init:function(){n.width=t,n.height=e,document.querySelector("main").appendChild(n)}}}();draw.init(),draw.getCanvas().addEventListener("mousemove",function(t){draw.setXY(t),draw.writeXY(),"path"===draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()}),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)}),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)}),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")}),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")}),document.getElementById("btnCircle").addEventListener("click",function(){draw.setShape("circle")}),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")}),document.getElementById("strokeColor").addEventListener("change",function(){document.getElementById("randStrokeColor");draw.setStrokeColor(document.getElementById("strokeColor").value)}),document.getElementById("randStrokeColor").addEventListener("change",function(){draw.setStrokeColor("")});